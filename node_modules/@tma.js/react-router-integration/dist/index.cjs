"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("react");class _ extends Error{constructor(e,r,n){super(r,{cause:n}),this.type=e,Object.setPrototypeOf(this,_.prototype)}}function g(t,e,r){return new _(t,e,r)}const O="ERR_UNEXPECTED_TYPE",$="ERR_PARSE";function f(){return g(O,"Value has unexpected type")}class E{constructor(e,r,n){this.parser=e,this.isOptional=r,this.type=n}parse(e){if(!(this.isOptional&&e===void 0))try{return this.parser(e)}catch(r){throw g($,`Unable to parse value${this.type?` as ${this.type}`:""}`,r)}}optional(){return this.isOptional=!0,this}}function d(t,e){return()=>new E(t,!1,e)}const c=d(t=>{if(typeof t=="boolean")return t;const e=String(t);if(e==="1"||e==="true")return!0;if(e==="0"||e==="false")return!1;throw f()},"boolean");function S(t,e){const r={};for(const n in t){const o=t[n];if(!o)continue;let u,i;if(typeof o=="function"||"parse"in o)u=n,i=typeof o=="function"?o:o.parse.bind(o);else{const{type:a}=o;u=o.from||n,i=typeof a=="function"?a:a.parse.bind(a)}try{const a=i(e(u));a!==void 0&&(r[n]=a)}catch(a){throw g($,`Unable to parse field "${n}"`,a)}}return r}function P(t){let e=t;if(typeof e=="string"&&(e=JSON.parse(e)),typeof e!="object"||e===null||Array.isArray(e))throw f();return e}function p(t,e){return new E(r=>{const n=P(r);return S(t,o=>n[o])},!1,e)}const h=d(t=>{if(typeof t=="number")return t;if(typeof t=="string"){const e=Number(t);if(!Number.isNaN(e))return e}throw f()},"number");function R(t){return/^#[\da-f]{6}$/i.test(t)}function U(t){return/^#[\da-f]{3}$/i.test(t)}function k(t){const e=t.replace(/\s/g,"").toLowerCase();if(R(e))return e;if(U(e)){let n="#";for(let o=0;o<3;o+=1)n+=e[1+o].repeat(2);return n}const r=e.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||e.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!r)throw new Error(`Value "${t}" does not satisfy any of known RGB formats.`);return r.slice(1).reduce((n,o)=>{const u=parseInt(o,10).toString(16);return n+(u.length===1?"0":"")+u},"#")}const s=d(t=>{if(typeof t=="string"||typeof t=="number")return t.toString();throw f()},"string"),q=d(t=>k(s().parse(t)),"rgb");p({req_id:s(),data:t=>t===null?t:s().optional().parse(t)}),p({req_id:s(),result:t=>t,error:s().optional()}),p({slug:s(),status:s()}),p({status:s()}),p({data:s().optional()}),p({theme_params:t=>{const e=q().optional();return Object.entries(P(t)).reduce((r,[n,o])=>(r[n]=e.parse(o),r),{})}}),p({height:h(),width:t=>t==null?window.innerWidth:h().parse(t),is_state_stable:c(),is_expanded:c()}),p({status:s()});p({id:h(),type:s(),title:s(),photoUrl:{type:s().optional(),from:"photo_url"},username:s().optional()},"Chat").optional();p({addedToAttachmentMenu:{type:c().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:c().optional(),from:"allows_write_to_pm"},firstName:{type:s(),from:"first_name"},id:h(),isBot:{type:c().optional(),from:"is_bot"},isPremium:{type:c().optional(),from:"is_premium"},languageCode:{type:s().optional(),from:"language_code"},lastName:{type:s().optional(),from:"last_name"},photoUrl:{type:s().optional(),from:"photo_url"},username:s().optional()},"User").optional();function w(t,e){return t.startsWith(e)?t:`${e}${t}`}function N(t){return new URL(typeof t=="string"?t:`${t.pathname||""}${w(t.search||"","?")}${w(t.hash||"","#")}`,"http://a")}function y(t){const e=typeof t=="string"?t.startsWith("/"):!!(t.pathname&&t.pathname.startsWith("/")),r=N(t);return`${e?r.pathname:r.pathname.slice(1)}${r.search}${r.hash}`}function C(t){const e=l.useCallback(()=>({state:t.state,key:t.id,pathname:t.pathname,hash:t.hash,search:t.search}),[t]),[r,n]=l.useState(e),o=l.useCallback((i,a,m)=>{m||(m={}),a===void 0&&(a=m.state);const b=y(i);m.replace?t.replace(b,a):t.push(b,a)},[t]),u=l.useMemo(()=>({go(i){t.go(i)},push:o,replace:o,createHref:i=>t.renderPath(y(i)),encodeLocation:i=>N(t.renderPath(y(i)))}),[t]);return l.useEffect(()=>t.on("change",()=>n(e())),[t,e]),[r,u]}exports.useIntegration=C;
//# sourceMappingURL=index.cjs.map
