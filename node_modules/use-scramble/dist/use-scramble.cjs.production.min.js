"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("react");function e(r,e){return Math.floor(Math.random()*(e-r+1))+r}function n(r){var n;return n=2===r.length?e(r[0],r[1]):r[e(0,r.length-1)],String.fromCharCode(n)}exports.useScramble=function(t){var u=t.playOnMount,c=void 0===u||u,i=t.text,o=void 0===i?"":i,a=t.speed,f=void 0===a?1:a,l=t.seed,s=void 0===l?1:l,h=t.step,d=void 0===h?1:h,m=t.tick,v=void 0===m?1:m,g=t.scramble,p=void 0===g?1:g,A=t.chance,b=void 0===A?1:A,y=t.overflow,F=void 0===y||y,M=t.range,w=void 0===M?[65,125]:M,R=t.overdrive,k=void 0===R||R,q=t.onAnimationStart,x=t.onAnimationFrame,C=t.onAnimationEnd,E=t.ignore,S=void 0===E?[" "]:E;"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(d=o.length,b=0,k=!1);var O=r.useRef(null),_=r.useRef(0),j=r.useRef(0),H=1e3/(60*f),L=r.useRef(0),P=r.useRef(0),T=r.useRef([]),z=r.useRef(0),B=function(r,e){return S.includes(""+r)?r:e},D=function r(n){f&&(_.current=requestAnimationFrame(r),function(){if(k)for(var r=0;r<d;r++){var e=Math.max(T.current.length,o.length);z.current<e&&(T.current[z.current]=B(o[z.current],String.fromCharCode("boolean"==typeof k?95:k)),z.current++)}}(),n-j.current>H&&(j.current=n,L.current%v==0&&(function(){for(var r=0;r<d;r++)if(P.current<o.length){var n=P.current,t=e(0,10)>=10*(1-b);T.current[n]=B(o[P.current],t?p+e(0,Math.ceil(p/2)):0),P.current++}}(),function(){o.length<T.current.length&&(T.current.pop(),T.current.splice(o.length,d));for(var r=0;r<d;r++)T.current.length<o.length&&T.current.push(B(o[T.current.length+1],null))}(),function(){if(P.current!==o.length)for(var r=0;r<s;r++){var n=e(P.current,T.current.length);"number"!=typeof T.current[n]&&void 0!==T.current[n]&&(T.current[n]=B(T.current[n],e(0,10)>=10*(1-b)?p||s:0))}}()),G()))},G=function(){if(O.current){for(var r="",e=0;e<T.current.length;e++){var t=T.current[e];switch(!0){case"number"==typeof t&&t>0:r+=n(w),e<=P.current&&(T.current[e]=T.current[e]-1);break;case"string"==typeof t&&(e>=o.length||e>=P.current):r+=t;break;case t===o[e]&&e<P.current:r+=o[e];break;case 0===t&&e<o.length:r+=o[e],T.current[e]=o[e];break;default:r+=""}}O.current.innerHTML=r,x&&x(r),r===o&&(T.current.splice(o.length,T.current.length),C&&C(),cancelAnimationFrame(_.current)),L.current++}},I=function(){L.current=0,P.current=0,z.current=0,F||(T.current=new Array(null==o?void 0:o.length))};return r.useEffect((function(){I()}),[o]),r.useEffect((function(){return cancelAnimationFrame(_.current),_.current=requestAnimationFrame(D),function(){cancelAnimationFrame(_.current)}}),[D]),r.useEffect((function(){c||(T.current=o.split(""),L.current=o.length,P.current=o.length,z.current=o.length,G(),cancelAnimationFrame(_.current))}),[]),{ref:O,replay:function(){cancelAnimationFrame(_.current),I(),q&&q(),_.current=requestAnimationFrame(D)}}};
//# sourceMappingURL=use-scramble.cjs.production.min.js.map
